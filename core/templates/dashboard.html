{% extends "base.html" %}
{% block title %}Panel de Vecinos{% endblock %}
{% block extra_head %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background-color: #fffaf5; color: #333; }
    .sidebar { min-height: 100vh; background-color: #e63946; color: white; }
    .sidebar h5 { color: #fff; }
    .sidebar a { text-decoration: none; display: flex; align-items: center; gap: 10px;
                 padding: 12px; color: white; border-radius: 6px; margin-bottom: 5px; font-size: 1rem; }
    .sidebar a:hover { background-color: #b71c1c; color: #fff; }
    .card { border: none; border-radius: 12px; }
    .card-orange { background-color: #f97316; color: white; }
    .card-red { background-color: #dc2626; color: white; }
    .card-yellow { background-color: #facc15; color: #333; }
    .card-light { background-color: #fff; color: #333; border: 1px solid #ddd; }
    .publication-container { background: white; color: #333; border-radius: 10px;
                              padding: 20px; margin-bottom: 20px; border: 1px solid #ddd; }
    .publication-container h4 { font-weight: bold; color: #e63946; }
    .text-accent { color: #f97316 !important; }
  </style>
{% endblock %}
{% block content %}
<div class="row">
  <!-- Contenido principal -->
  <div class="col-md-9 col-lg-10 p-4">
    <h2 class="fw-bold mb-4 text-accent">Bienvenido al Panel de Vecinos</h2>
    
    <!-- Publicaciones -->
    <div class="publication-container shadow-sm">
      <h4><i class="bi bi-chat-left-text"></i> Últimas Publicaciones</h4>
      
      {% if ultimas_publicaciones %}
        <div class="list-group mt-3">
          {% for p in ultimas_publicaciones %}
            <div class="list-group-item mb-2">
              <h5 class="text-accent">{{ p.titulo }}</h5>
              <p>{{ p.contenido|truncatewords:30 }}</p>
              <small class="text-muted">
                <i class="bi bi-person-circle"></i> Por {{ p.vecino.username }} el {{ p.fecha|date:"d/m/Y H:i" }}
              </small>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted mt-3">No hay publicaciones todavía. ¡Sé el primero en compartir algo con la comunidad!</p>
      {% endif %}
      
      <a href="{% url 'lista_publicaciones' %}" class="btn btn-outline-danger btn-sm mt-3">
        <i class="bi bi-arrow-right-circle"></i> Ver Todas las Publicaciones
      </a>
    </div>
    
    <!-- Reportes -->
    <div class="row g-4 mt-4">
      <div class="col-md-4">
        <div class="card card-orange shadow">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-exclamation-triangle"></i> Reportes</h5>
            <p class="card-text">Reporta incidencias o consulta el estado de tus reportes.</p>
            <a href="{% url 'lista_reportes' %}" class="btn btn-light w-100">Ver Reportes</a>
          </div>
        </div>
      </div>
      <!-- Multas -->
      <div class="col-md-4">
        <div class="card card-yellow shadow">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-cash-coin"></i> Multas</h5>
            <p class="card-text">Consulta y paga tus multas pendientes.</p>
            <a href="{% url 'lista_multas' %}" class="btn btn-dark w-100">Ver Multas</a>
          </div>
        </div>
      </div>
      <!-- Objetos Perdidos -->
      <div class="col-md-4">
        <div class="card card-light shadow">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-bag"></i> Objetos Perdidos</h5>
            <p class="card-text">Publica o busca objetos extraviados en la comunidad.</p>
            <a href="{% url 'lista_objetos_perdidos' %}" class="btn btn-danger w-100">Ver Objetos</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}