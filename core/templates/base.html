{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Vizinho{% endblock %}</title>
  
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  
  <!-- Google Fonts: Poppins (headers) y Nunito Sans (body/buttons) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ===== VARIABLES DE COLOR (Paleta suave y moderna) ===== */
    :root {
      /* Colores primarios - Más suaves que naranja intenso */
      --primary: #FF7B54;        /* Coral suave */
      --primary-dark: #E85D3A;   /* Coral oscuro para hover */
      --primary-light: #FFB199;  /* Coral muy claro */
      
      /* Colores secundarios - Rojos más suaves */
      --secondary: #D64550;      /* Rojo rosado suave */
      --secondary-dark: #B83743;
      
      /* Colores de acento */
      --accent: #FFD7C4;         /* Melocotón */
      --accent-dark: #FFC1A0;
      
      /* Neutros modernos */
      --bg-main: #FAFBFC;        /* Fondo principal casi blanco */
      --bg-card: #FFFFFF;        /* Tarjetas blancas */
      --bg-sidebar: #2C3E50;     /* Sidebar gris azulado oscuro */
      --bg-sidebar-hover: #34495E;
      
      /* Textos */
      --text-dark: #2C3E50;      /* Texto principal */
      --text-muted: #6C757D;     /* Texto secundario */
      --text-light: #FFFFFF;     /* Texto claro */
      
      /* Bordes y sombras */
      --border-color: #E5E8EB;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.1);
      
      /* Estados */
      --success: #52C41A;
      --warning: #FAAD14;
      --danger: #F5222D;
      --info: #1890FF;
    }

    /* ===== TIPOGRAFÍA ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Nunito Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: var(--bg-main);
      color: var(--text-dark);
      font-size: 15px;
      line-height: 1.6;
      font-weight: 400;
    }

    h1, h2, h3, h4, h5, h6,
    .h1, .h2, .h3, .h4, .h5, .h6 {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      color: var(--text-dark);
      line-height: 1.3;
      margin-bottom: 0.75rem;
    }

    h1, .h1 { font-size: 2rem; }
    h2, .h2 { font-size: 1.5rem; }
    h3, .h3 { font-size: 1.25rem; }
    h4, .h4 { font-size: 1.1rem; }
    h5, .h5 { font-size: 1rem; font-weight: 600; }

    /* ===== SIDEBAR ===== */
    .sidebar {
      min-height: 100vh;
      background: linear-gradient(135deg, var(--bg-sidebar) 0%, #1a252f 100%);
      color: var(--text-light);
      padding: 1.75rem 1rem;
      box-shadow: 2px 0 12px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    .sidebar::-webkit-scrollbar {
      width: 6px;
    }

    .sidebar::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
    }

    .sidebar-brand {
      font-family: 'Poppins', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-light);
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .sidebar-brand i {
      color: var(--primary);
      font-size: 1.75rem;
    }

    .nav-section-title {
      font-family: 'Poppins', sans-serif;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: rgba(255,255,255,0.5);
      margin: 1.5rem 0 0.75rem 0;
    }

    .sidebar a {
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 0.85rem 1rem;
      color: rgba(255,255,255,0.85);
      border-radius: 10px;
      margin-bottom: 0.35rem;
      font-family: 'Nunito Sans', sans-serif;
      font-size: 0.95rem;
      font-weight: 600;
      transition: all 0.25s ease;
      position: relative;
    }

    .sidebar a:hover {
      background: var(--bg-sidebar-hover);
      color: var(--text-light);
      transform: translateX(4px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .sidebar a.active {
      background: var(--primary);
      color: var(--text-light);
      box-shadow: 0 2px 12px rgba(255,123,84,0.3);
    }

    .sidebar a i {
      font-size: 1.1rem;
      width: 20px;
      text-align: center;
    }

    .sidebar hr {
      border-color: rgba(255,255,255,0.1);
      margin: 1.5rem 0;
    }

    /* ===== CONTENIDO PRINCIPAL ===== */
    .content-area {
      background-color: var(--bg-card);
      border-radius: 16px;
      padding: 2rem;
      min-height: 90vh;
      box-shadow: var(--shadow-sm);
      margin: 1.5rem;
    }

    /* ===== CARDS ===== */
    .card {
      border: none;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
      overflow: hidden;
      background: var(--bg-card);
    }

    .card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .card-header {
      background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
      color: var(--text-light);
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      border: none;
      padding: 1rem 1.25rem;
    }

    .card-body {
      padding: 1.5rem;
    }

    /* Stats cards específicos */
    .stat-card {
      text-align: center;
      padding: 1.5rem;
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
    }

    .stat-card h5 {
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.75rem;
      opacity: 0.9;
    }

    .stat-card h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 2.25rem;
      font-weight: 700;
      margin: 0;
    }

    .stat-card i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      opacity: 0.8;
    }

    .stat-card-primary {
      background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
      color: var(--text-light);
    }

    .stat-card-secondary {
      background: linear-gradient(135deg, #FFE5B4 0%, var(--warning) 100%);
      color: var(--text-dark);
    }

    .stat-card-danger {
      background: linear-gradient(135deg, #FFB3BA 0%, var(--danger) 100%);
      color: var(--text-light);
    }

    .stat-card-info {
      background: linear-gradient(135deg, #D4E7FF 0%, var(--info) 100%);
      color: var(--text-light);
    }

    /* ===== BOTONES ===== */
    .btn {
      font-family: 'Nunito Sans', sans-serif;
      font-weight: 600;
      padding: 0.65rem 1.5rem;
      border-radius: 8px;
      border: none;
      transition: all 0.25s ease;
      font-size: 0.95rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: var(--text-light);
      box-shadow: 0 2px 8px rgba(255,123,84,0.25);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, var(--primary-dark) 0%, #C94A2E 100%);
      box-shadow: 0 4px 12px rgba(255,123,84,0.35);
      transform: translateY(-1px);
      color: var(--text-light);
    }

    .btn-secondary {
      background: var(--bg-sidebar);
      color: var(--text-light);
    }

    .btn-secondary:hover {
      background: var(--bg-sidebar-hover);
      color: var(--text-light);
      transform: translateY(-1px);
    }

    .btn-success {
      background: linear-gradient(135deg, #73D13D 0%, var(--success) 100%);
      color: var(--text-light);
    }

    .btn-success:hover {
      background: linear-gradient(135deg, var(--success) 0%, #389E0D 100%);
      color: var(--text-light);
      transform: translateY(-1px);
    }

    .btn-warning {
      background: linear-gradient(135deg, #FFC53D 0%, var(--warning) 100%);
      color: var(--text-dark);
    }

    .btn-warning:hover {
      background: linear-gradient(135deg, var(--warning) 0%, #D48806 100%);
      color: var(--text-dark);
      transform: translateY(-1px);
    }

    .btn-danger {
      background: linear-gradient(135deg, #FF7875 0%, var(--danger) 100%);
      color: var(--text-light);
    }

    .btn-danger:hover {
      background: linear-gradient(135deg, var(--danger) 0%, #CF1322 100%);
      color: var(--text-light);
      transform: translateY(-1px);
    }

    .btn-outline-primary {
      border: 2px solid var(--primary);
      color: var(--primary);
      background: transparent;
    }

    .btn-outline-primary:hover {
      background: var(--primary);
      color: var(--text-light);
      transform: translateY(-1px);
    }

    .btn-sm {
      padding: 0.45rem 1rem;
      font-size: 0.875rem;
    }

    .btn-lg {
      padding: 0.875rem 2rem;
      font-size: 1.05rem;
    }

    /* ===== TABLAS ===== */
    .table {
      font-family: 'Nunito Sans', sans-serif;
      border-collapse: separate;
      border-spacing: 0;
    }

    .table thead th {
      background: var(--bg-main);
      color: var(--text-dark);
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border: none;
      padding: 1rem;
    }

    .table tbody tr {
      transition: all 0.2s ease;
      border-bottom: 1px solid var(--border-color);
    }

    .table tbody tr:hover {
      background: var(--bg-main);
      transform: scale(1.01);
    }

    .table tbody td {
      padding: 1rem;
      vertical-align: middle;
      border: none;
    }

    /* ===== BADGES ===== */
    .badge {
      font-family: 'Nunito Sans', sans-serif;
      font-weight: 600;
      padding: 0.4rem 0.75rem;
      border-radius: 6px;
      font-size: 0.8rem;
      letter-spacing: 0.3px;
    }

    /* ===== ALERTS (mensajes de Django) ===== */
    .alert {
      border: none;
      border-radius: 10px;
      padding: 1rem 1.25rem;
      margin-bottom: 1.5rem;
      font-family: 'Nunito Sans', sans-serif;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .alert i {
      font-size: 1.25rem;
    }

    .alert-success {
      background: linear-gradient(135deg, #F6FFED 0%, #D9F7BE 100%);
      color: #135200;
      border-left: 4px solid var(--success);
    }

    .alert-danger {
      background: linear-gradient(135deg, #FFF1F0 0%, #FFCCC7 100%);
      color: #A8071A;
      border-left: 4px solid var(--danger);
    }

    .alert-warning {
      background: linear-gradient(135deg, #FFFBE6 0%, #FFF1B8 100%);
      color: #AD6800;
      border-left: 4px solid var(--warning);
    }

    .alert-info {
      background: linear-gradient(135deg, #E6F7FF 0%, #BAE7FF 100%);
      color: #003A8C;
      border-left: 4px solid var(--info);
    }

    /* ===== FORMULARIOS ===== */
    .form-label {
      font-family: 'Nunito Sans', sans-serif;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .form-control, .form-select {
      border: 1.5px solid var(--border-color);
      border-radius: 8px;
      padding: 0.65rem 1rem;
      font-family: 'Nunito Sans', sans-serif;
      transition: all 0.25s ease;
      font-size: 0.95rem;
    }

    .form-control:focus, .form-select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255,123,84,0.1);
      outline: none;
    }

    /* ===== FOOTER ===== */
    footer {
      background: var(--bg-sidebar);
      color: var(--text-light);
      padding: 1.5rem 0;
      margin-top: 3rem;
      font-family: 'Nunito Sans', sans-serif;
      box-shadow: 0 -2px 12px rgba(0,0,0,0.08);
    }

    footer p {
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.85;
    }

    /* ===== UTILIDADES ===== */
    .text-muted {
      color: var(--text-muted) !important;
    }

    .fw-bold {
      font-weight: 700 !important;
    }

    .fw-semibold {
      font-weight: 600 !important;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
      .sidebar {
        position: relative;
        height: auto;
        min-height: auto;
      }

      .content-area {
        margin: 1rem;
        padding: 1.5rem;
      }

      h1, .h1 { font-size: 1.75rem; }
      h2, .h2 { font-size: 1.35rem; }
    }

    /* ===== ANIMACIONES SUAVES ===== */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .content-area {
      animation: fadeIn 0.4s ease;
    }

    /* ===== SCROLLBAR PERSONALIZADA ===== */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-main);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }
  </style>
  
  {% block extra_head %}{% endblock %}
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <!-- SIDEBAR -->
      <div class="col-md-3 col-lg-2 sidebar p-3">
        <div class="sidebar-brand">
          <i class="bi bi-house-heart-fill"></i>
          Vizinho
        </div>

        <div class="nav-section-title">Navegación</div>
        {% if user.is_authenticated %}
          {% if user.rol == "admin" or user.is_superuser %}
            <a href="{% url 'dashboard_admin' %}" class="nav-link">
              <i class="bi bi-speedometer2"></i> Inicio
            </a>
          {% else %}
            <a href="{% url 'dashboard' %}" class="nav-link">
              <i class="bi bi-house-door"></i> Inicio
            </a>
          {% endif %}
        {% endif %}

        <a href="{% url 'lista_publicaciones' %}">
          <i class="bi bi-chat-left-text"></i> Publicaciones
        </a>
        <a href="{% url 'lista_reportes' %}">
          <i class="bi bi-exclamation-triangle"></i> Reportes
        </a>
        <a href="{% url 'lista_multas' %}">
          <i class="bi bi-cash-coin"></i> Multas
        </a>
        <a href="{% url 'lista_objetos_perdidos' %}">
          <i class="bi bi-bag"></i> Objetos Perdidos
        </a>
        <a href="{% url 'activar_panico' %}">
          <i class="bi bi-shield-exclamation"></i> Botón de Pánico
        </a>

        <hr>
        
        <div class="nav-section-title">Cuenta</div>
        {% if user.is_authenticated %}
          <a href="{% url 'ver_perfil' %}">
            <i class="bi bi-person-circle"></i> Mi Perfil
          </a>
          <a href="{% url 'logout' %}">
            <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
          </a>
        {% else %}
          <a href="{% url 'login' %}">
            <i class="bi bi-box-arrow-in-right"></i> Iniciar Sesión
          </a>
        {% endif %}
      </div>

      <!-- CONTENIDO PRINCIPAL -->
      <main class="col-md-9 col-lg-10 p-0">
        <!-- Mensajes de Django -->
        {% if messages %}
          <div class="mx-4 mt-4">
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {% if message.tags == 'success' %}
                  <i class="bi bi-check-circle-fill"></i>
                {% elif message.tags == 'error' %}
                  <i class="bi bi-exclamation-circle-fill"></i>
                {% elif message.tags == 'warning' %}
                  <i class="bi bi-exclamation-triangle-fill"></i>
                {% else %}
                  <i class="bi bi-info-circle-fill"></i>
                {% endif %}
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <div class="content-area">
          {% block content %}{% endblock %}
        </div>
      </main>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="text-center">
    <p>© 2025 Vizinho - Sistema de Gestión Comunitaria</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_scripts %}{% endblock %}
</body>
</html>